{% extends 'website/common/template.html' %}
{% load static %}
{% load custom_tags %}
{% block content %}
	<section class="container">
		<div class="category-list">
			<div class="inner">
				<!-- ì¹´í…Œê³ ë¦¬ë³„ ë‰´ìŠ¤ -->
				<ul class="sub-menu category">
					<li class="active"><a href="javascript:;">ìë™ì°¨ ì—…ê³„ ë‰´ìŠ¤</a></li>
					<li><a href="javascript:;">ì¤‘ê³ ì°¨ ë‰´ìŠ¤</a></li>
					<li><a href="javascript:;">ì‹ ì°¨ ë‰´ìŠ¤</a></li>
					<li><a href="javascript:;">ì‹œìŠ¹ê¸°</a></li>
				</ul>
				<!-- ì–¸ë¡ ì‚¬ë³„ ë‰´ìŠ¤ -->
				<ul class="sub-menu media">
					<li class="active"><a href="javascript:;">ì˜¤í† í—¤ëŸ´ë“œ</a></li>
					<li><a href="javascript:;">ë°ì¼ë¦¬ì¹´</a></li>
					<li><a href="javascript:;">ì˜¤í† ë·°</a></li>
					<li><a href="javascript:;">ITì¡°ì„ </a></li>
					<li><a href="javascript:;">ì˜¤í† ëª¨ë‹</a></li>
					<li><a href="javascript:;">ì˜¤í† ë‹¤ì´ì–´ë¦¬</a></li>
					<li><a href="javascript:;">ì¹´ê°€ì´</a></li>
					<li><a href="javascript:;">ë”ë“œë¼ì´ë¸Œ</a></li>
					<li><a href="javascript:;">ëª¨í„°ê·¸ë˜í”„</a></li>
					<li><a href="javascript:;">íƒ‘ë¼ì´ë”</a></li>
					<li><a href="javascript:;">ê¸€ë¡œë²Œëª¨í„°ì¦ˆ</a></li>
					<li><a href="javascript:;">ëª¨í„°ë§¤ê±°ì§„</a></li>
				</ul>
				<!-- ê²€ìƒ‰ -->
				<div class="result-info">
					<p>"<span></span>"ì— ëŒ€í•œ ì—°ê´€ëœ ë‰´ìŠ¤ê°€ ì´ <strong></strong>ê±´ ìˆìŠµë‹ˆë‹¤.</p>
					<a href="javascript:;" onclick="loadNewsList(0, 'category', 0, 15, 'default', 'change'); $('#search_keyword').val('')"><span>ğŸ”™</span> ëŒì•„ê°€ê¸°</a>
				</div>
			</div>
		</div>
		<div class="item-list">
			<div class="inner">
				<div class="list-top">
					<p class="txt-guide">* ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ë‰´ìŠ¤ë¡œ ì´ë™ë©ë‹ˆë‹¤.</p>
					<!-- ëª©ë¡ íƒ€ì… (ìŠ¤íƒ€ì¼) ë³€ê²½ -->
					<div class="list-type">
						<button type="button" class="btn type01 active" title="ëª©ë¡ ì„¸ë¡œ íƒ€ì…ìœ¼ë¡œ ë³´ê¸°"></button>
						<button type="button" class="btn type02" title="ëª©ë¡ ê°€ë¡œ íƒ€ì…ìœ¼ë¡œ ë³´ê¸°"></button>
					</div> 
				</div>
				<ul class="news-group show"></ul>
			</div>
		</div>	
		<div class="all-list-summary">
			<div class="positive" style="width:0%;"></div>
			<div class="negative" style="width:0%;"></div>
		</div>
	</section>
	<div class="loading">
		<div class="dim"></div>
		<div class="loading-box">
			<div class="out-box">
				<i class="in-box"></i>
			</div>
			<p>
				ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.<br>
				(ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.)
			</p>
		</div>
	</div>

	<!-- ê³µì§€ì‚¬í•­ -->
	<div class="notice-wrap">
		<div class="dim"></div>
		<div class="notice-box">
			<a href="javascript:;" class="btn-close">X</a>
			<h2 class="notice-title">2021.02.22 ì—…ë°ì´íŠ¸ ì•Œë¦¼</h2>
			<div class="notice-cont">
				<ul>
					<li>
						<strong class="title">ì‹ ê·œ ì–¸ë¡ ì‚¬ ì¶”ê°€</strong>
						<p>
							ë‰´ìŠ¤ ìˆ˜ì§‘ ì—…ì²´ì— "íƒ‘ë¼ì´ë”" ì–¸ë¡ ì‚¬ë¥¼ ì¶”ê°€í•˜ì˜€ì—ˆìŠµë‹ˆë‹¤.
						</p>
					</li>
					<li>
						<strong class="title">ì°¨ëŸ‰ ëª¨ë¸ë³„ ì‹œìŠ¹ê¸° / ì—¬ë¡  ëª¨ìŒ ë©”ë‰´ ì¶”ê°€</strong>
						<p>
							ì°¨ëŸ‰ ëª¨ë¸ë³„ ì‹œìŠ¹ê¸° / ì—¬ë¡  ëª¨ìŒ ë©”ë‰´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
							ëª¨ë¸ë³„ë¡œ ìœ íŠœë¸Œ ì‹œìŠ¹ì˜ìƒ ìƒìœ„(ì—°ê´€ì„±) 10ê°œë¥¼ í•œê³³ì—ì„œ ë³¼ ìˆ˜ ìˆê³ , 
							í•´ë‹¹ ì˜ìƒë“¤ì˜ ëŒ“ê¸€ì„ ëª¨ë‘ ìˆ˜ì§‘í•˜ì—¬ ë…¸ì¶œì‹œì¼œ í•´ë‹¹ ëª¨ë¸ì˜ ì—¬ë¡ ì´ 
							ì–´ë–¤ì§€ íŒŒì•… í•  ìˆ˜ ìˆê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤. <br>
							(ìœ íŠœë¸Œ ì˜ìƒì˜ ëŒ“ê¸€ì´ê¸°ë•Œë¬¸ì— ì°¨ëŸ‰ê³¼ ë¬´ê´€í•œ ë‚´ìš©ì˜ ëŒ“ê¸€ì´ ì¡´ì¬í•©ë‹ˆë‹¤.)							
						</p>
					</li>
				</ul>
			</div>
			<a href="javascript:;" class="btn-check">í™•ì¸ (ì˜¤ëŠ˜í•˜ë£¨ ì—´ì§€ ì•Šê¸°)</a>
		</div>
	</div>
</div>

<script>
var connFlag = false;
$(function(){	
	
	//ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°
	/*
	if($.cookie('noticeCookie') == undefined){
		$('.notice-wrap').show();
		$.cookie('noticeCookie', 'done', { expires: 1, path: '/' });
	}
	$('.notice-wrap .btn-close').on('click', function(){
		$('.notice-wrap').hide();
	});
	$('.notice-wrap .btn-check').on('click', function(){
		$.cookie('noticeCookie', 'done', { expires: 1, path: '/' });
		$('.notice-wrap').hide();
	});*/

	//ì¹´í…Œê³ ë¦¬ í´ë¦­
	$('.category-list ul li a').on('click', function(){
		var choicedListType = $(this).closest('.sub-menu').hasClass('category') ? 'category' : 'media'
		$('#wrap').prop('class', '').addClass(choicedListType);
		if(!connFlag){
			var idx = $(this).parent('li').index();
			var categoryBeforeCurrIdx = $('.category-list ul li.active').index();
			if(idx !== categoryBeforeCurrIdx){
				$(this).closest('ul').find('li').removeClass('active');
				$(this).parent('li').addClass('active');
				if($(this).closest('ul').hasClass('category')){
					loadNewsList(idx, 'category', 0, 15);
				}else if($(this).closest('ul').hasClass('media')){
					loadNewsList(idx, 'media', 0, 15);
				}
			}
			
		}
	});
	//ì¢‹ì•„ìš”(ì°œ)
	$(document).on('click', '.item-list ul li .btn-like', function(){
		alert('ì¹´ë‰´ìŠ¤.zip íšŒì› ì „ìš© ê¸°ëŠ¥ì…ë‹ˆë‹¤.');
		location.href='/login';
	});
	//ëª©ë¡íƒ€ì… ë³€ê²½
	$('.list-type .btn').on('click', function(){
		idx = $(this).index();
		$('.list-type .btn').removeClass('active').eq(idx).addClass('active');
		if(idx == 0){
			$('.news-group').removeClass('type02');
		}else if(idx == 1){
			$('.news-group').addClass('type02');
		}
	});

	//ìŠ¤í¬ë¡¤ ë¡œë“œ (í˜ì´ì§•)
	$(window).on('scroll', function(e){
		if(($(window).innerHeight() + $(window).scrollTop()) >= $('body').height() - 150) {
			if(!connFlag){
				var thisCategory = $('.sub-menu.show li.active').index();
				var thisNewsType = $('#wrap').prop('class');
				var nowListLength = $('.news-group li').length;
				if($('#wrap').hasClass('search-result')){
					var keyword = $('#search_keyword').val();
					loadNewsList(99, 'all', nowListLength, 12, 'more', null, keyword);
				}else{
					loadNewsList(thisCategory, thisNewsType, nowListLength, 12, 'more');
				}
			}
		}
	});

	//news view count
	$(document).on('click', '.item-list ul li a', function(){
		var idx = $(this).parent('li').index();
		var nowCount = $(this).find('.infos').find('.view-cnt').children('strong').text();
		var newsCode = $(this).parent('li').data('news-code');
		{% comment %} alert('idx = '+ idx + ' / newscount=' + nowCount + ' / newscode = ' + newsCode) {% endcomment %}
		viewCountUp(idx, nowCount, newsCode)
	});

	//ë¦¬ì‚¬ì´ì§•
	listTypeSet();
	$(window).resize(function(){
		listTypeSet();
	});
});

function listTypeSet(){
	var winWidth = $(window).width();
	if(winWidth <= 1280){
		$('.news-group').removeClass('type02');
		$('.list-type .btn').removeClass('active').eq(0).addClass('active');
	}
}
	
//news list > view count
function viewCountUp(idx, nowCount, newsCode){
	$.ajax({
		url: '{% url "view_count" %}',
		type: 'GET',
		data: {
			'now_count': nowCount,
			'news_code': newsCode
		},
		dataType: 'json',
		success: function(data){
			$('.news-group.show li').eq(idx).find('.view-cnt').children('strong').text(data);
		}
	});
}
</script>
</body>
</html>
{% endblock %}